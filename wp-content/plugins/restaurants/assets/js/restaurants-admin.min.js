!function(e){"use strict";e(function(){var t,l,i;t=e('[data-id="url-file"]'),i=e("#remove-file"),l=e("#upload-file"),l.on("click",function(s){s.preventDefault();var o,r;return void 0!==o?void o.open():(o=wp.media.frames.file_frame=wp.media({button:{text:"Choose File"},frame:"select",multiple:!1,title:"Choose File"}),o.on("select",function(){r=o.state().get("selection").first().toJSON(),0>e.trim(r.url.length)||(t.val(r.url),l.toggleClass("hide"),i.toggleClass("hide"))}),void o.open())}),i.on("click",function(e){e.preventDefault(),t.val(""),l.toggleClass("hide"),i.toggleClass("hide")})})}(jQuery),function(e){"use strict";e(function(){var t,l,i;t=e('[data-id="image-file"]'),i=e("#remove-file"),l=e("#upload-file"),l.on("click",function(s){s.preventDefault();var o,r;return void 0!==o?void o.open():(o=wp.media.frames.file_frame=wp.media({button:{text:"Choose File"},frame:"select",multiple:!1,title:"Choose File"}),o.on("select",function(){r=o.state().get("selection").first().toJSON(),0>e.trim(r.url.length)||(t.val(r.url),l.toggleClass("hide"),i.toggleClass("hide"))}),void o.open())}),i.on("click",function(e){e.preventDefault(),t.val(""),l.toggleClass("hide"),i.toggleClass("hide")})})}(jQuery),jQuery(document).ready(function(e){var t,l=e("#_sbgs_uploader_slides"),i=e("#sbgs_uploader_container ul.sbgs_mini_slides");e(".add_slides").click(function(e){e.preventDefault();var s=l.val();return t?void t.open():(t=wp.media.frames.sbgs_uploader=wp.media({button:{text:"Choose Images"},className:"media-frame sbgs-uploader-frame",frame:"select",library:{type:"image"},multiple:!0,title:"Choose Images"}),t.on("select",function(){var e=t.state().get("selection");e.map(function(e){e=e.toJSON(),console.log(e),e.id&&(s=s?s+","+e.id:e.id,i.append('<li class="sbgs_slide" data-attachment_id="'+e.id+'"><img src="'+e.sizes.thumbnail.url+'" class="sbgs_mini_slide" /><a href="#" class="delete" title="Delete Image">&times;</a></li>'))}),l.val(s)}),void t.open())}),i.sortable({items:"li.sbgs_slide",cursor:"move",scrollSensitivity:40,forcePlaceholderSize:!0,forceHelperSize:!1,helper:"clone",opacity:.65,placeholder:"sbgs-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style")},update:function(t,i){var s="";e(".sbgs_mini_slides li.sbgs_slide").css("cursor","default").each(function(){var e=jQuery(this).attr("data-attachment_id");s=s?s+","+e:e}),l.val(s)}}),e(".sbgs_mini_slides").on("click","a.delete",function(){e(this).closest("li.sbgs_slide").remove();var t="";return e(".sbgs_mini_slides li.sbgs_slide").css("cursor","default").each(function(){var e=jQuery(this).attr("data-attachment_id");t=t?t+","+e:e}),l.val(t),!1})}),function(e){"use strict";function t(e,t,l){return console.log(t),e.preventDefault(),console.log(l),l.classList.contains("first")||i.removeChild(l),!1}var l=document.querySelector("#add-repeater"),i=document.querySelector(".repeaters"),s=i.querySelectorAll(".repeater:not(.hidden)"),o=i.querySelector(".repeater.hidden"),r=s.length;l.addEventListener("click",function(e){e.preventDefault();var t=o.cloneNode(!0);return t.classList.remove("hidden"),i.insertBefore(t),!1});for(var a=0;a<r;a++){var n=s[a],c=n.querySelector(".link-remove"),d=n.querySelector(".btn-edit"),u=n.querySelector(".repeater-content"),f=n.querySelector(".title-repeater"),m=n.querySelector("[data-title]"),g=m.value;console.log(d),c.addEventListener("click",function(e){t(e,this,n)}),d.addEventListener("click",function(t){n.classList.toggle("closed"),e(u).slideToggle("150")}),console.log(g),m.addEventListener("keyup",function(){f.createTextNode(g)}),g.length>0&&(f.textContent=g)}e(function(){e(i).sortable({cursor:"move",handle:".handle",items:".repeater",opacity:.6})})}(jQuery);